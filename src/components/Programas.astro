---
import { withBase } from "@/utils/withBase";
---
<section
  id="programas"
  class="relative py-20 bg-[var(--color-dark)] text-[var(--color-light)] overflow-hidden"
>
  <!-- ğŸŒ«ï¸ Degradado superior -->
  <div class="absolute top-0 inset-x-0 h-24 bg-gradient-to-b from-black/40 to-transparent"></div>

  <!-- ğŸ·ï¸ TÃTULO -->
  <div class="text-center mb-16 relative z-10">
    <h2 class="text-4xl md:text-5xl font-extrabold tracking-wide mb-4">
      NUESTROS <span class="text-[var(--color-secondary)]">PROGRAMAS</span>
    </h2>
    <div class="flex justify-center mt-4 mb-8">
      <div class="w-32 h-[3px] bg-[var(--color-accent)] rounded-full shadow-[0_0_15px_rgba(255,215,0,0.6)]"></div>
    </div>
    <p class="text-light/80 max-w-2xl mx-auto text-lg font-light">
      Entrenamientos adaptados a cada etapa del desarrollo futbolÃ­stico: tÃ©cnica, disciplina y valores.
    </p>
  </div>

  <!-- ğŸŸ© GRID DE PROGRAMAS -->
  <div class="max-w-6xl mx-auto grid gap-10 md:grid-cols-3 px-6 relative z-10">
    <!-- ğŸ‘¦ INFANTIL -->
    <div
      class="group relative bg-gradient-to-b from-[var(--color-primary)]/90 to-[var(--color-secondary)]/80 rounded-xl shadow-lg overflow-hidden hover:scale-[1.03] transition-transform duration-500"
    >
      <img
        src="img/programa-infantil.webp"
        loading="lazy"
        alt="Programa Infantil"
        class="w-full h-56 object-cover opacity-80 group-hover:opacity-100 transition duration-300"
      />
      <div class="p-6">
        <h3 class="text-2xl font-bold mb-2">CategorÃ­a Infantil</h3>
        <p class="text-light/80 text-sm mb-4">
          Enfoque en coordinaciÃ³n, diversiÃ³n y fundamentos del juego. Desarrollamos pasiÃ³n y disciplina desde pequeÃ±os.
        </p>
        <button
          data-programa="infantil"
          class="inline-block mt-2 bg-[var(--color-accent)] text-[var(--color-dark)] font-semibold px-4 py-2 rounded-md shadow-md hover:bg-yellow-400 hover:scale-105 transition-all duration-300"
        >
          Ver mÃ¡s
        </button>
      </div>
    </div>

    <!-- ğŸ§’ JUVENIL -->
    <div
      class="group relative bg-gradient-to-b from-[var(--color-primary)]/90 to-[var(--color-secondary)]/80 rounded-xl shadow-lg overflow-hidden hover:scale-[1.03] transition-transform duration-500"
    >
      <img
        src={withBase("img/programa-juvenil.webp")}
        loading="lazy"
        alt="Programa Juvenil"
        class="w-full h-56 object-cover opacity-80 group-hover:opacity-100 transition duration-300"
      />
      <div class="p-6">
        <h3 class="text-2xl font-bold mb-2">CategorÃ­a Juvenil</h3>
        <p class="text-light/80 text-sm mb-4">
          Potenciamos la tÃ©cnica, la estrategia y la disciplina mental. Fomentamos el liderazgo y la cooperaciÃ³n.
        </p>
        <button
          data-programa="juvenil"
          class="inline-block mt-2 bg-[var(--color-accent)] text-[var(--color-dark)] font-semibold px-4 py-2 rounded-md shadow-md hover:bg-yellow-400 hover:scale-105 transition-all duration-300"
        >
          Ver mÃ¡s
        </button>
      </div>
    </div>

    <!-- ğŸ¦Œ AVANZADO -->
    <div
      class="group relative bg-gradient-to-b from-[var(--color-primary)]/90 to-[var(--color-secondary)]/80 rounded-xl shadow-lg overflow-hidden hover:scale-[1.03] transition-transform duration-500"
    >
      <img
        src={withBase("img/programa-avanzado.webp")}
        loading="lazy"
        alt="Programa Avanzado"
        class="w-full h-56 object-cover opacity-80 group-hover:opacity-100 transition duration-300"
      />
      <div class="p-6">
        <h3 class="text-2xl font-bold mb-2">CategorÃ­a Avanzada</h3>
        <p class="text-light/80 text-sm mb-4">
          Entrenamiento competitivo de alto rendimiento. PreparaciÃ³n tÃ©cnica y tÃ¡ctica para niveles profesionales.
        </p>
        <button
          data-programa="avanzado"
          class="inline-block mt-2 bg-[var(--color-accent)] text-[var(--color-dark)] font-semibold px-4 py-2 rounded-md shadow-md hover:bg-yellow-400 hover:scale-105 transition-all duration-300"
        >
          Ver mÃ¡s
        </button>
      </div>
    </div>
  </div>

  <!-- ğŸŸ© MODAL DETALLE OPTIMIZADO -->
<div
  id="modal-programa"
  class="fixed inset-0 bg-black/80 backdrop-blur-md hidden items-center justify-center z-50"
>
  <div
    id="modal-content"
    class="relative bg-[var(--color-dark)] rounded-2xl border border-[var(--color-secondary)]/40 shadow-[0_0_40px_rgba(0,0,0,0.6)] max-w-6xl w-[95%] overflow-hidden opacity-0 scale-95 transition-all duration-400 ease-out"
  >
    <!-- âŒ BotÃ³n de cierre -->
    <button
      id="closeModal"
      class="absolute top-4 right-5 text-light/70 hover:text-[var(--color-accent)] text-2xl font-bold transition z-20"
      aria-label="Cerrar"
    >
      Ã—
    </button>

    <!-- ğŸ“˜ Contenido -->
    <div class="p-8 md:p-10 text-left">
      <!-- ğŸ·ï¸ TÃ­tulo -->
      <h3
        id="modal-title"
        class="text-3xl md:text-4xl font-extrabold text-[var(--color-accent)] mb-3 tracking-tight"
      >
        TÃ­tulo del Programa
      </h3>

      <!-- DescripciÃ³n principal -->
      <p
        id="modal-desc"
        class="text-light/90 text-[1.05rem] leading-relaxed mb-8 max-w-3xl"
      >
        DescripciÃ³n extendida del programa...
      </p>

      <!-- ğŸ§© Bloques en 3 columnas -->
      <div class="grid md:grid-cols-3 gap-8 mb-10">
        <!-- Beneficios -->
        <div>
          <h4 class="text-lg font-semibold mb-3 text-[var(--color-secondary)]">
            Beneficios
          </h4>
          <ul
            id="modal-beneficios"
            class="grid gap-y-2 text-light/85 text-sm leading-snug"
          ></ul>
        </div>

        <!-- Valores -->
        <div>
          <h4 class="text-lg font-semibold mb-3 text-[var(--color-secondary)]">
            Valores
          </h4>
          <div
            id="modal-valores"
            class="flex flex-wrap gap-2 text-[var(--color-accent)] text-sm font-semibold"
          ></div>
        </div>

        <!-- Horarios -->
        <div>
          <h4 class="text-lg font-semibold mb-3 text-[var(--color-secondary)]">
            Horarios y Niveles
          </h4>
          <div
            id="modal-extra"
            class="bg-[var(--color-primary)]/60 rounded-lg p-5 border border-[var(--color-secondary)]/30 text-sm text-light/85"
          ></div>
        </div>
      </div>

      <!-- ğŸ“¸ GalerÃ­a tipo slider -->
      <div class="relative mb-10">
        <h4 class="text-lg font-semibold mb-3 text-[var(--color-secondary)]">
          Momentos del Entrenamiento
        </h4>

        <div class="relative overflow-hidden">
          <!-- Slider -->
          <div
            id="modal-slider"
            class="flex gap-3 overflow-x-auto snap-x snap-mandatory scroll-smooth no-scrollbar"
          ></div>

          <!-- Controles -->
          <button
            id="prev-slide"
            aria-label="Anterior"
            class="absolute left-0 top-1/2 -translate-y-1/2 bg-[var(--color-primary)]/70 text-[var(--color-accent)] hover:bg-[var(--color-primary)] transition rounded-full w-8 h-8 flex items-center justify-center shadow-lg"
          >
            â€¹
          </button>
          <button
            id="next-slide"
            aria-label="Siguiente"
            class="absolute right-0 top-1/2 -translate-y-1/2 bg-[var(--color-primary)]/70 text-[var(--color-accent)] hover:bg-[var(--color-primary)] transition rounded-full w-8 h-8 flex items-center justify-center shadow-lg"
          >
            â€º
          </button>
        </div>
      </div>

      <!-- CTA -->
      <div class="text-center">
        <a
          href="#inscripcion"
          class="inline-block bg-[var(--color-accent)] text-[var(--color-dark)] font-semibold px-8 py-3 rounded-md shadow-md hover:scale-105 transition"
        >
          Inscribirme ahora
        </a>
      </div>
    </div>
  </div>
</section>

<!-- âœ¨ SCRIPT OPTIMIZADO -->
<script is:inline>
  // ===============================
  // âš½ Datos de los programas
  // ===============================
  const programas = {
    infantil: {
      titulo: "CategorÃ­a Infantil",
      desc: "Ideal para niÃ±os y niÃ±as de 5 a 9 aÃ±os. Se centra en desarrollar coordinaciÃ³n, disciplina, motricidad y amor por el fÃºtbol mediante dinÃ¡micas lÃºdicas y entrenamiento divertido.",
      beneficios: [
        "âš½ IniciaciÃ³n tÃ©cnica con ejercicios dinÃ¡micos.",
        "ğŸƒ Desarrollo de coordinaciÃ³n y reflejos.",
        "ğŸ¤ Trabajo en equipo desde temprana edad.",
        "ğŸ¯ Juegos enfocados en concentraciÃ³n y respeto.",
      ],
      valores: ["Disciplina", "AlegrÃ­a", "Respeto", "CooperaciÃ³n"],
      galeria: [
        withBase("img/infantil.webp"),
        withBase("img/infantil1.webp"),
        withBase("img/infantil2.webp"),
      ],
      extra: `
        ğŸ“… Lunes a Viernes â€” 4:00 PM a 6:00 PM<br>
        ğŸ“ Cancha Atalaya Infantil<br>
        ğŸ‘¶ Nivel Inicial y Principiante
      `,
    },
    juvenil: {
      titulo: "CategorÃ­a Juvenil",
      desc: "Dirigida a jÃ³venes de 10 a 14 aÃ±os que buscan perfeccionar su tÃ©cnica y tÃ¡ctica. Enfocamos los entrenamientos en disciplina, visiÃ³n de juego y desarrollo fÃ­sico controlado.",
      beneficios: [
        "ğŸ¯ Perfeccionamiento tÃ©cnico y tÃ¡ctico.",
        "ğŸ’ª Fortalecimiento fÃ­sico progresivo.",
        "ğŸ§  Toma de decisiones en juego real.",
        "ğŸ¦¶ Entrenamientos especÃ­ficos por posiciÃ³n.",
      ],
      valores: ["Liderazgo", "Esfuerzo", "Responsabilidad", "Trabajo en equipo"],
      galeria: [
        withBase("img/juvenil.webp"),
        withBase("img/juvenil1.webp"),
        withBase("img/juvenil2.webp"),
      ],
      extra: `
        ğŸ“… Martes a SÃ¡bado â€” 5:00 PM a 7:00 PM<br>
        ğŸ“ Campo Norte Atalaya<br>
        âš½ Nivel Intermedio y Avanzado
      `,
    },
    avanzado: {
      titulo: "CategorÃ­a Avanzada",
      desc: "Programa de alto rendimiento para jugadores de 15 aÃ±os en adelante. Entrenamientos intensivos con enfoque competitivo, preparaciÃ³n tÃ¡ctica, tÃ©cnica y mental para visorias y torneos.",
      beneficios: [
        "ğŸ”¥ Entrenamiento de alto rendimiento.",
        "ğŸ‹ï¸ PreparaciÃ³n fÃ­sica personalizada.",
        "ğŸ§© AnÃ¡lisis tÃ¡ctico y estratÃ©gico.",
        "ğŸ¥‡ Plan de competencia y visorias.",
      ],
      valores: ["Compromiso", "Perseverancia", "Competitividad", "SuperaciÃ³n"],
      galeria: [
        withBase("img/avanzado.webp"),
        withBase("img/avanzado1.webp"),
        withBase("img/avanzado2.webp"),
      ],
      extra: `
        ğŸ“… Lunes, MiÃ©rcoles y Viernes â€” 6:00 PM a 8:00 PM<br>
        ğŸ“ Campo Principal Atalaya<br>
        ğŸ¦Œ Nivel Alto Rendimiento / Competitivo
      `,
    },
  };const programas = {
    infantil: {
      titulo: "CategorÃ­a Infantil",
      desc: "Ideal para niÃ±os y niÃ±as de 5 a 9 aÃ±os. Se centra en desarrollar coordinaciÃ³n, disciplina, motricidad y amor por el fÃºtbol mediante dinÃ¡micas lÃºdicas y entrenamiento divertido.",
      beneficios: [
        "âš½ IniciaciÃ³n tÃ©cnica con ejercicios dinÃ¡micos.",
        "ğŸƒ Desarrollo de coordinaciÃ³n y reflejos.",
        "ğŸ¤ Trabajo en equipo desde temprana edad.",
        "ğŸ¯ Juegos enfocados en concentraciÃ³n y respeto.",
      ],
      valores: ["Disciplina", "AlegrÃ­a", "Respeto", "CooperaciÃ³n"],
      galeria: [
        withBase("img/infantil.webp"),
        withBase("img/infantil1.webp"),
        withBase("img/infantil2.webp"),
      ],
      extra: `
        ğŸ“… Lunes a Viernes â€” 4:00 PM a 6:00 PM<br>
        ğŸ“ Cancha Atalaya Infantil<br>
        ğŸ‘¶ Nivel Inicial y Principiante
      `,
    },
    juvenil: {
      titulo: "CategorÃ­a Juvenil",
      desc: "Dirigida a jÃ³venes de 10 a 14 aÃ±os que buscan perfeccionar su tÃ©cnica y tÃ¡ctica. Enfocamos los entrenamientos en disciplina, visiÃ³n de juego y desarrollo fÃ­sico controlado.",
      beneficios: [
        "ğŸ¯ Perfeccionamiento tÃ©cnico y tÃ¡ctico.",
        "ğŸ’ª Fortalecimiento fÃ­sico progresivo.",
        "ğŸ§  Toma de decisiones en juego real.",
        "ğŸ¦¶ Entrenamientos especÃ­ficos por posiciÃ³n.",
      ],
      valores: ["Liderazgo", "Esfuerzo", "Responsabilidad", "Trabajo en equipo"],
      galeria: [
        withBase("img/juvenil.webp"),
        withBase("img/juvenil1.webp"),
        withBase("img/juvenil2.webp"),
      ],
      extra: `
        ğŸ“… Martes a SÃ¡bado â€” 5:00 PM a 7:00 PM<br>
        ğŸ“ Campo Norte Atalaya<br>
        âš½ Nivel Intermedio y Avanzado
      `,
    },
    avanzado: {
      titulo: "CategorÃ­a Avanzada",
      desc: "Programa de alto rendimiento para jugadores de 15 aÃ±os en adelante. Entrenamientos intensivos con enfoque competitivo, preparaciÃ³n tÃ¡ctica, tÃ©cnica y mental para visorias y torneos.",
      beneficios: [
        "ğŸ”¥ Entrenamiento de alto rendimiento.",
        "ğŸ‹ï¸ PreparaciÃ³n fÃ­sica personalizada.",
        "ğŸ§© AnÃ¡lisis tÃ¡ctico y estratÃ©gico.",
        "ğŸ¥‡ Plan de competencia y visorias.",
      ],
      valores: ["Compromiso", "Perseverancia", "Competitividad", "SuperaciÃ³n"],
      galeria: [
        withBase("img/avanzado.webp"),
        withBase("img/avanzado1.webp"),
        withBase("img/avanzado2.webp"),
      ],
      extra: `
        ğŸ“… Lunes, MiÃ©rcoles y Viernes â€” 6:00 PM a 8:00 PM<br>
        ğŸ“ Campo Principal Atalaya<br>
        ğŸ¦Œ Nivel Alto Rendimiento / Competitivo
      `,
    },
  };

  // ===============================
  // âš™ï¸ LÃ³gica del modal
  // ===============================
  const modal = document.getElementById("modal-programa");
  const content = document.getElementById("modal-content");
  const closeModal = document.getElementById("closeModal");
  const slider = document.getElementById("modal-slider");

  document.querySelectorAll("[data-programa]").forEach((btn) => {
    btn.addEventListener(
      "click",
      (e) => {
        e.preventDefault();
        const id = btn.dataset.programa;
        const p = programas[id];
        if (!p) return console.warn(`âš ï¸ Programa '${id}' no encontrado`);

        // Contenido
        document.getElementById("modal-title").textContent = p.titulo;
        document.getElementById("modal-desc").textContent = p.desc;
        document.getElementById("modal-beneficios").innerHTML = p.beneficios
          .map((b) => `<li>${b}</li>`)
          .join("");
        document.getElementById("modal-valores").innerHTML = p.valores
          .map(
            (v) =>
              `<span class="bg-[var(--color-secondary)]/20 px-3 py-1 rounded-full border border-[var(--color-secondary)]/40">${v}</span>`
          )
          .join("");
        document.getElementById("modal-extra").innerHTML = p.extra;
        slider.innerHTML = p.galeria
          .map(
            (g) =>
              `<img src="${g}" loading="lazy" decoding="async" class="rounded-md w-64 h-40 object-cover snap-center shrink-0 hover:scale-105 transition-all" />`
          )
          .join("");

        // Mostrar modal sin scroll en pÃ¡gina
        document.documentElement.classList.add("overflow-hidden");
        modal.classList.remove("hidden");
        modal.classList.add("flex");
        requestAnimationFrame(() => {
          content.classList.remove("opacity-0", "scale-95");
          content.classList.add("opacity-100", "scale-100");
        });
      },
      { passive: true }
    );
  });

  // Cierre modal
  closeModal.addEventListener("click", () => {
    content.classList.add("opacity-0", "scale-95");
    document.documentElement.classList.remove("overflow-hidden");
    setTimeout(() => {
      modal.classList.add("hidden");
      modal.classList.remove("flex");
    }, 400);
  });
  modal.addEventListener("click", (e) => {
    if (e.target === modal) closeModal.click();
  });

  // ===============================
  // ğŸï¸ Slider simple (sin repaints)
  // ===============================
  document.getElementById("prev-slide").addEventListener("click", () => {
    slider.scrollBy({ left: -300, behavior: "smooth" });
  });
  document.getElementById("next-slide").addEventListener("click", () => {
    slider.scrollBy({ left: 300, behavior: "smooth" });
  });
</script>
